---
import BaseLayout from "@layouts/BaseLayout.astro";
import Image from "astro/components/Image.astro";
import ProfilePicture from "@assets/images/profile.png";
import Button from "@components/shared/Button.astro";
import ListIcon from "@assets/icons/list.svg?raw";
import DownloadIcon from "@assets/icons/download.svg?raw";

const CV_URL = "https://github.com/KanarekLife/CV/releases/latest/download/cv.pdf";
---

<BaseLayout>
	<section class="my-10 mt-20 md:mt-56 h-1/2 flex flex-col md:flex-row-reverse justify-between gap-8">
		<div class="flex justify-center items-center">
			<Image src={ProfilePicture} alt="Stanisław Nieradko" class="h-full w-auto max-h-64 md:max-h-52 lg:max-h-80 rounded-lg" />
		</div>
		<div class="flex flex-col justify-center">
			<h1 class="text-4xl md:text-5xl lg:text-7xl text-center md:text-left bold text-nowrap">Stanisław Nieradko</h1>
			<p class="subtitle text-lg text-center md:text-left text-gray-300">Backend Software Developer</p>
			<div class="flex gap-8 mt-16 md:mt-12 justify-center md:justify-normal">
				<Button href="/blog/" variant="primary"><Fragment set:html={ListIcon} />Visit my blog</Button>
				<Button href={CV_URL}><Fragment set:html={DownloadIcon} />Download CV</Button>
			</div>
		</div>
	</section>
</BaseLayout>

<script>
	import gsap from "gsap";
	import { TextPlugin } from "gsap/TextPlugin";

	gsap.registerPlugin(TextPlugin);

	function setupSubtitleCarousel(): void {
		const titles = ["Backend Software Developer", ".NET Enthusiast", "Computer Science Student", "HomeLab Owner"];

		const tl = gsap.timeline({ repeat: -1 });

		for (const title of titles) {
			tl.to(".subtitle", { text: title, duration: 1, delay: 5, ease: "none" });
		}
		tl.to(".subtitle", { text: titles[0]!, duration: 1, delay: 5, ease: "none" });

		tl.play();
	}

	setupSubtitleCarousel();
</script>
